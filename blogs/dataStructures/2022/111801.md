---
title: 数据结构与算法——day11
date: 2022-11-18 10:11
tags: 
 - dataStructures
 - algorithms
categories: 
 - frontEnd
---

## 排序和搜索算法

### 冒泡排序

> 时间复杂度 O(n^2)

辅助函数 `swap` 交换数组中的元素位置：

```ts
export function swap(array: any[], a: number, b: number) {
  [array[a], array[b]] = [array[b], array[a]]
}
```

辅助函数 `defaultCompare` 比较 a 与 b 的大小：

```ts
export enum Compare {
  LESS_THAN = -1,
  BIGGER_THAN = 1,
  EQUALS = 0,
}

export function defaultCompare<T>(a: T, b: T): number {
  if (a === b)
    return Compare.EQUALS

  return a < b ? Compare.LESS_THAN : Compare.BIGGER_THAN
}
```

排序算法实现：

```ts
export function bubbleSort<T>(array: T[], compareFn = defaultCompare) {
  const { length } = array

  for (let i = 0; i < length; i++) {
    for (let j = 0; j < length - 1; j++) {
      if (compareFn(array[j], array[j + 1]) === Compare.BIGGER_THAN)
        swap(array, j, j + 1)
    }
  }

  return array
}
```

图示分析如下：

![冒泡排序](./2022-11-18-10-56-17.png)

可以发现红色部分其实是未必要的比较，于是乎对代码进行优化如下

```ts
export function modifiedBubbleSort<T>(array: T[], compareFn = defaultCompare) {
  const { length } = array

  for (let i = 0; i < length; i++) {
    for (let j = 0; j < length - 1 - i; j++) {
      if (compareFn(array[j], array[j + 1]) === Compare.BIGGER_THAN)
        swap(array, j, j + 1)
    }
  }

  return array
}
```

接着上 `vitest` 测试结果如下：

```ts
const arr = [8, 7, 5, 4, 3, 2]

test('bubbleSort', () => {
  expect(modifiedBubbleSort(arr)).toMatchInlineSnapshot(`
    [
      2,
      3,
      4,
      5,
      7,
      8,
    ]
  `)
})
```

## 选择排序
