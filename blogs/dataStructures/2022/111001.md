---
title: æ•°æ®ç»“æ„ä¸ç®—æ³•â€”â€”day10
date: 2022-11-10 16:58
tags: 
 - dataStructures
 - algorithms
categories: 
 - frontEnd
---

## åŸºäºå›¾çš„ç®—æ³•

### æœ€çŸ­è·¯å¾„ç®—æ³•

#### Dijkstraç®—æ³•

> Dijkstraç®—æ³•æ˜¯ä¸€ç§è®¡ç®—ä»å•ä¸ªæºåˆ°æ‰€æœ‰å…¶ä»–æºçš„æœ€çŸ­è·¯å¾„çš„è´ªå¿ƒç®—æ³•

![é‚»æ¥çŸ©é˜µ](./2022-11-11-13-52-35.png)

å›¾ç¤ºçš„å›¾å¯¹åº”çš„é‚»æ¥çŸ©é˜µä»£ç å¦‚ä¸‹

```ts
const graph = [
  [0, 2, 4, 0, 0, 0],
  [0, 0, 1, 4, 2, 0],
  [0, 0, 0, 0, 3, 0],
  [0, 0, 0, 0, 0, 2],
  [0, 0, 0, 3, 0, 2],
  [0, 0, 0, 0, 0, 0],
]
```

dijkstraç®—æ³•å®ç°å¦‚ä¸‹

```ts
const INF = Number.MAX_SAFE_INTEGER

const minDistance = (dist: number[], visited: boolean[]) => {
  let min = INF
  let minIndex = -1

  for (let v = 0; v < dist.length; v++) {
    if (visited[v] === false && dist[v] <= min) {
      min = dist[v]
      minIndex = v
    }
  }

  return minIndex
}

const tmp: Record<string, any> = {}

export const dijkstra = (vertices: string[], graph: number[][], src: number) => {
  const dist: number[] = []
  const visited: boolean[] = []
  const length = graph.length

  // åˆå§‹åŒ–æ‰€æœ‰é¡¶ç‚¹è·ç¦»æºç‚¹è·ç¦»éƒ½æ˜¯æ— ç©·å¤§ï¼ŒåŒæ—¶æ‰€æœ‰é¡¶ç‚¹éƒ½æœªè®¿é—®
  for (let i = 0; i < length; i++) {
    dist[i] = INF
    visited[i] = false
  }

  // æºç‚¹åˆ°è‡ªå·±çš„è·¯å¾„ç½®ä¸º0
  dist[src] = 0

  for (let i = 0; i < length - 1; i++) {
    // æ‰¾å‡ºè·ç¦»æºç‚¹æœ€å°è·ç¦»çš„é¡¶ç‚¹u
    const u = minDistance(dist, visited)

    // å°†è¯¥é¡¶ç‚¹ç½®ä¸ºå·²ç»è®¿é—®ï¼ˆåç»­ç”±äºå·²ç»è®¿é—®è¿‡è¯¥é¡¶ç‚¹ï¼Œæ‰€ä»¥minDistanceä¸ä¼šå†æ¬¡è¿”å›è¯¥é¡¶ç‚¹ç´¢å¼•ï¼‰
    visited[u] = true

    // éå†é¡¶ç‚¹uçš„æ‰€æœ‰é‚»æ¥ç‚¹v
    for (let v = 0; v < length; v++) {
      // 1. !visited[v]è¡¨ç¤ºé¡¶ç‚¹æœªè¢«è®¿é—®
      // 2. graph[u][v] !== 0 && dist[u] !== INFè¡¨ç¤ºå­˜åœ¨é‚»æ¥ç‚¹è·¯å¾„
      // 3. dist[u] + graph[u][v] < dist[v] å·²è®¿é—®é¡¶ç‚¹uåˆ°æºç‚¹srcçš„è·ç¦»dist[u]åŠ ä¸Šå·²è®¿é—®é¡¶ç‚¹uåˆ°é‚»æ¥ç‚¹vçš„è·ç¦»æ˜¯å¦å°äº våˆ°æºç‚¹srcçš„è·ç¦»
      if (!visited[v] && graph[u][v] !== 0 && dist[u] !== INF && dist[u] + graph[u][v] < dist[v]) {
        dist[v] = dist[u] + graph[u][v]

        const key = `${vertices[src]} -> ${vertices[v]}`
        tmp[key] = `${vertices[src]} -> ${vertices[u]} -> ${vertices[v]}, ${dist[v]}`
      }
    }
  }

  return { tmp, dist }
}

```

è‡ªå·±å¢åŠ äº†é¢å¤–çš„æ‰“å°è·¯å¾„ä»£ç ï¼Œä½¿ç”¨vitestæµ‹è¯•ä»£ç å¦‚ä¸‹

```ts
test('Dijkstra', () => {
  const vertices = ['A', 'B', 'C', 'D', 'E', 'F']

  const graph = [
    [0, 2, 4, 0, 0, 0],
    [0, 0, 1, 4, 2, 0],
    [0, 0, 0, 0, 3, 0],
    [0, 0, 0, 0, 0, 2],
    [0, 0, 0, 3, 0, 2],
    [0, 0, 0, 0, 0, 0],
  ]

  expect(dijkstra(vertices, graph, 1).tmp).toMatchInlineSnapshot(`
    {
      "B -> C": "B -> B -> C, 1",
      "B -> D": "B -> B -> D, 4",
      "B -> E": "B -> B -> E, 2",
      "B -> F": "B -> E -> F, 4",
    }
  `)

  expect(dijkstra(vertices, graph, 1).dist).toMatchInlineSnapshot(`
    [
      9007199254740991,
      0,
      1,
      4,
      2,
      4,
    ]
  `)
})
```

åˆ†æè¿‡ç¨‹å¦‚ä¸‹

* distæ•°ç»„å­˜æ”¾é¡¶ç‚¹è·ç¦»æºç‚¹æœ€çŸ­è·ç¦»çš„æ•°å€¼
* visitedæ•°ç»„å­˜æ”¾é¡¶ç‚¹æ˜¯å¦è®¿é—®è¿‡ï¼ˆé¿å…é‡å¤è®¿é—®ï¼‰
* å†…éƒ¨å¾ªç¯æ§åˆ¶äºŒç»´æ•°ç»„çš„æ¨ªå‘éå†é‚»æ¥ç‚¹å¹¶æ¯”è¾ƒå…¶ä¸æºç‚¹è·ç¦»å¹¶æ›´æ–°
* å¤–éƒ¨å¾ªç¯æ§åˆ¶äºŒç»´æ•°ç»„çš„çºµå‘ï¼ˆæ³¨æ„`length-1`ï¼Œ æˆ‘ä¹Ÿä¸æ˜¯å¾ˆæ‡‚ä¸ºå•¥ï¼Œä½†æ˜¯ä¸‹å›¾çš„åˆ†æå°±æ˜¯èƒ½è¯æ˜æ— éœ€å¤–éƒ¨å¤šä¸€æ¬¡å¾ªç¯ğŸ˜‚ï¼‰

![åˆ†ææµç¨‹å›¾](./Dijkstra.png)

#### Floyd-Warshallç®—æ³•

> Floyd-Warshallç®—æ³•æ˜¯ä¸€ç§è®¡ç®—å›¾ä¸­æ‰€æœ‰æœ€çŸ­è·¯å¾„çš„åŠ¨æ€è§„åˆ’ç®—æ³•

1. æ ¹æ®graphç”Ÿæˆdistæ•°ç»„å¹¶åˆå§‹åŒ–
2. å¼•å…¥ä¸­é—´ç‚¹kï¼Œå¯»æ‰¾i -> j =  (i -> k) + (k -> j)

ä»£ç å¦‚ä¸‹

```ts
export const floydWarshall = (graph: number[][]) => {
  const dist: number[][] = []
  const length = graph.length

  // åˆå§‹åŒ–distæ•°ç»„ï¼ˆå¯¹è§’çº¿éƒ½æ˜¯0ï¼Œå…¶ä½™ä½ç½®ä¿æŒåŸæ¥graphçš„æ•°å€¼ï¼‰
  for (let i = 0; i < length; i++) {
    dist[i] = []
    for (let j = 0; j < length; j++) {
      // å¯¹è§’çº¿éƒ½æ˜¯0ï¼Œè‡ªå·±åˆ°è‡ªå·±ï¼
      if (i === j)
        dist[i][j] = 0

      // å¦‚æœ graph[i][j] ä¸ºINFè¡¨ç¤º i -> jä¸å­˜åœ¨è·ç¦»ï¼ï¼
      else if (!isFinite(graph[i][j]))
        dist[i][j] = Infinity

      // i -> jå­˜åœ¨è·ç¦»é‚£ä¹ˆå°±ç­‰äºå›¾ä¸­çš„æƒå€¼
      else
        dist[i][j] = graph[i][j]
    }
  }

  // å¼•å…¥ä¸­é—´ç‚¹kï¼Œæ‰€ä»¥ i -> j = (i -> k) + (k -> j)è·ç¦»ä¹‹å’Œï¼Œ
  // æ ¸å¿ƒå°±æ˜¯ dist[i][k] + dist[k][j] < dist[i][j] è¿›è€Œæ›´æ–°
  for (let k = 0; k < length; k++) {
    for (let i = 0; i < length; i++) {
      for (let j = 0; j < length; j++) {
        if (dist[i][k] + dist[k][j] < dist[i][j])
          dist[i][j] = dist[i][k] + dist[k][j]
      }
    }
  }

  return dist
}
```

ä½¿ç”¨ vitestæµ‹è¯•ä»£ç å¦‚ä¸‹

```ts
test('FloydWarshall', () => {
  const INF = Infinity
  const graph = [
    [INF, 2, 4, INF, INF, INF],
    [INF, INF, 1, 4, 2, INF],
    [INF, INF, INF, INF, 3, INF],
    [INF, INF, INF, INF, INF, 2],
    [INF, INF, INF, 3, INF, 2],
    [INF, INF, INF, INF, INF, INF],
  ]

  expect(floydWarshall(graph)).toMatchInlineSnapshot(`
    [
      [
        0,
        2,
        3,
        6,
        4,
        6,
      ],
      [
        Infinity,
        0,
        1,
        4,
        2,
        4,
      ],
      [
        Infinity,
        Infinity,
        0,
        6,
        3,
        5,
      ],
      [
        Infinity,
        Infinity,
        Infinity,
        0,
        Infinity,
        2,
      ],
      [
        Infinity,
        Infinity,
        Infinity,
        3,
        0,
        2,
      ],
      [
        Infinity,
        Infinity,
        Infinity,
        Infinity,
        Infinity,
        0,
      ],
    ]
  `)
})
```

### æœ€å°ç”Ÿæˆæ ‘ï¼ˆMSTï¼‰

<span style="color: pink;">è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ</span> 

* <span style="color: pink;">ä½ çš„å…¬å¸æœ‰å‡ é—´åŠå…¬å®¤ï¼Œè¦ä»¥æœ€ä½çš„æˆæœ¬å®ç°åŠå…¬å®¤ç”µè¯çº¿è·¯ç›¸äº’è¿é€šï¼Œä»¥èŠ‚çœèµ„é‡‘ï¼Œæœ€å¥½çš„åŠæ³•æ˜¯ä»€ä¹ˆ</span>
* <span style="color: pink;">è®¾æƒ³ä½ è¦åœ¨nä¸ªå²›å±¿ä¹‹é—´å»ºé€ æ¡¥æ¢ï¼Œæƒ³ç”¨æœ€ä½çš„æˆæœ¬å®ç°æ‰€æœ‰å²›å±¿ç›¸äº’è¿é€š</span>

#### Primç®—æ³•

Primç®—æ³•æ˜¯ä¸€ç§æ±‚è§£ <span style="color: pink;">åŠ æƒæ— å‘è¿é€šå›¾</span> çš„MSTé—®é¢˜çš„è´ªå¿ƒç®—æ³•ã€‚å®ƒèƒ½æ‰¾å‡ºä¸€ä¸ªè¾¹çš„å­é›†ï¼Œ<span style="color: pink;">ä½¿å¾—å…¶æ„æˆçš„æ ‘åŒ…å«å›¾ä¸­æ‰€æœ‰é¡¶ç‚¹ï¼Œä¸”è¾¹çš„æƒå€¼ä¹‹å’Œæœ€å°ã€‚</span> ä»–çš„å…·ä½“å®ç°è·Ÿ`dijkstra`ç±»ä¼¼ï¼Œæ‰€ä»¥æˆ‘æœªæä¾›æµç¨‹å›¾è¿›è¡Œåˆ†æğŸ˜‚

ä»£ç å¦‚ä¸‹ï¼š

```ts
const INF = Number.MAX_SAFE_INTEGER

const minKey = (graph: number[][], key: number[], visited: boolean[]) => {
  let min = INF
  let minIndex = 0

  for (let v = 0; v < graph.length; v++) {
    if (visited[v] === false && key[v] < min) {
      min = key[v]
      minIndex = v
    }
  }

  return minIndex
}

export const prim = (graph: number[][]) => {
  const parent: number[] = []
  const key: number[] = []
  const visited: boolean[] = []
  const length = graph.length

  for (let i = 0; i < length; i++) {
    key[i] = INF
    visited[i] = false
  }

  key[0] = 0
  parent[0] = -1

  for (let i = 0; i < length - 1; i++) {
    const u = minKey(graph, key, visited)
    visited[u] = true

    for (let v = 0; v < length; v++) {
      if (graph[u][v] && visited[v] === false && graph[u][v] < key[v]) {
        parent[v] = u
        key[v] = graph[u][v]
      }
    }
  }

  return parent
}
```

vitestæµ‹è¯•å¦‚ä¸‹ï¼š

```ts
test('Prim', () => {
  const graph = [[0, 2, 4, 0, 0, 0],
    [2, 0, 2, 4, 2, 0],
    [4, 2, 0, 0, 3, 0],
    [0, 4, 0, 0, 3, 2],
    [0, 2, 3, 3, 0, 2],
    [0, 0, 0, 2, 2, 0],
  ]
  const parent = prim(graph)

  let str = ''

  for (let i = 1; i < graph.length; i++)
    str += `${parent[i]} - ${i}   ${graph[i][parent[i]]}\n`

  expect(str).toMatchInlineSnapshot(`
    "0 - 1   2
    1 - 2   2
    5 - 3   2
    1 - 4   2
    4 - 5   2
    "
  `)
})
```

è¾…åŠ©å›¾å¦‚ä¸‹ï¼š

![primè¾…åŠ©å›¾](./2022-11-17-16-10-40.png)

#### Kruskalç®—æ³•

Kruskalç®—æ³•ä¹Ÿæ˜¯ä¸€ç§ <span style="color: pink;">æ±‚åŠ æƒæ— å‘è¿é€šå›¾çš„MSTçš„è´ªå¿ƒç®—æ³•</span> 

ç”±äºä¹¦ä¸­ä»£ç å­˜åœ¨é—®é¢˜ï¼Œæ‰€ä»¥è¯·è®¿é—®å¦‚ä¸‹é“¾æ¥

> ç»™ä¸€ä¸ªé“¾æ¥ï¼š[Kruskalç®—æ³•jså®ç°](https://segmentfault.com/a/1190000012649227)
